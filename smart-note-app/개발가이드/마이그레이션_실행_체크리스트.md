# Supabase 마이그레이션 실행 체크리스트

## 📋 마이그레이션 전 준비사항

### 1. 백업
- [ ] Supabase 대시보드에서 현재 데이터베이스 스냅샷 생성
- [ ] 중요 데이터 로컬 백업 (필요시)

### 2. 마이그레이션 실행
- [ ] Supabase 대시보드 접속
- [ ] SQL Editor 열기
- [ ] migration-add-note-settings.sql 내용 복사
- [ ] SQL 실행

### 3. 마이그레이션 검증
```sql
-- 테이블 구조 확인
SELECT column_name, data_type, is_nullable 
FROM information_schema.columns 
WHERE table_name = '노트목록' 
AND column_name = '노트설정';

-- 인덱스 확인
SELECT indexname, indexdef 
FROM pg_indexes 
WHERE tablename = '노트목록' 
AND indexname = 'idx_note_settings';
```

## ✅ 마이그레이션 후 테스트

### 1. 기능 테스트
- [ ] 노트 설정 모달 열기/닫기
- [ ] 폴더 기본값 표시 확인
- [ ] 개별 설정 변경 저장
- [ ] 설정 즉시 반영 확인

### 2. 설정 항목별 테스트
- [ ] 시간표시여부 토글
- [ ] 입력방식 변경 (대화형/카테고리형)
- [ ] 하위입력활성화 토글
- [ ] 카테고리목록 편집 (카테고리형일 때)
- [ ] 캐릭터목록 편집 (대화형일 때)

### 3. 데이터 동기화 테스트
- [ ] 설정 변경 후 페이지 새로고침
- [ ] 다른 브라우저에서 변경사항 확인
- [ ] 실시간 업데이트 동작 확인

### 4. 에지 케이스 테스트
- [ ] 폴더 기본값으로 리셋
- [ ] 설정이 없는 노트 동작
- [ ] 부분적 설정만 있는 경우

## 🚨 문제 발생 시 롤백

```sql
-- 컬럼 제거
ALTER TABLE 노트목록 DROP COLUMN IF EXISTS 노트설정;

-- 인덱스 제거
DROP INDEX IF EXISTS idx_note_settings;
```

## 📝 실행 결과 기록

**실행일시**: 
**실행자**: 
**실행 결과**: 
**특이사항**: 

---
**작성일**: 2025-01-31