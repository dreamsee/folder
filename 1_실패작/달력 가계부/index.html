<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>달력 가계부</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="ux-styles.css">
    <link rel="stylesheet" href="ux-styles-extended.css">
</head>
<body>
    <!-- 온보딩 오버레이 -->
    <div id="onboarding-overlay" class="onboarding-overlay">
        <div class="onboarding-content">
            <div class="onboarding-step" data-step="1">
                <h2>👋 달력 가계부에 오신 것을 환영합니다!</h2>
                <p>간편하고 직관적인 가계부로 지출을 관리해보세요.</p>
                <div class="sample-calendar">📅</div>
                <button class="btn-primary" onclick="nextOnboardingStep()">시작하기</button>
            </div>
            
            <div class="onboarding-step hidden" data-step="2">
                <h2>💰 간편한 지출 입력</h2>
                <p>달력에서 날짜를 선택하고 지출을 빠르게 기록하세요.</p>
                <div class="sample-input">✏️ 점심 식사 - 8,000원</div>
                <button class="btn-primary" onclick="nextOnboardingStep()">다음</button>
            </div>
            
            <div class="onboarding-step hidden" data-step="3">
                <h2>📊 스마트한 분석</h2>
                <p>카테고리별로 지출을 자동 분류하고 월별 패턴을 파악하세요.</p>
                <div class="sample-chart">📈</div>
                <button class="btn-primary" onclick="closeOnboarding()">시작하기</button>
            </div>
        </div>
    </div>

    <!-- 메인 컨테이너 -->
    <div class="container">
        <!-- 앱 헤더 -->
        <header class="app-header">
            <div class="header-content">
                <h1 class="app-title">
                    <span class="title-icon">💰</span>
                    달력 가계부
                </h1>
                <div class="header-actions">
                    <div class="monthly-summary">
                        <span class="summary-label">이번 달 지출</span>
                        <span class="summary-amount" id="monthlyTotal">0원</span>
                    </div>
                    <button class="btn-secondary" onclick="showSettings()">⚙️</button>
                </div>
            </div>
        </header>

        <!-- 퀵 액션 패널 -->
        <div class="quick-actions">
            <button class="quick-action-btn primary" onclick="quickAddExpense()">
                <span class="action-icon">➕</span>
                <span class="action-text">빠른 입력</span>
            </button>
            <button class="quick-action-btn" onclick="showThisMonth()">
                <span class="action-icon">📊</span>
                <span class="action-text">이번 달</span>
            </button>
            <button class="quick-action-btn" onclick="showInsights()">
                <span class="action-icon">💡</span>
                <span class="action-text">분석</span>
            </button>
        </div>

        <!-- 메인 콘텐츠 -->
        <div class="main-content">
            <!-- 달력 영역 -->
            <div class="calendar-section">
            <div class="calendar-header">
                <button id="prevMonth">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
                    </svg>
                </button>
                <h2 id="currentMonth"></h2>
                <button id="nextMonth">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"/>
                    </svg>
                </button>
            </div>
            <div class="calendar-grid" id="calendar">
                <!-- 달력 날짜들이 여기 들어감 -->
            </div>
            
            <!-- 달력 하단 카테고리별 지출 목록 -->
            <div class="expense-summary">
                <div class="category-item">
                    <div class="category-header" onclick="toggleCategory('food')">
                        <span class="category-name">식비</span>
                        <span class="category-total" id="food-total">(0원)</span>
                        <span class="toggle-icon" id="food-toggle">▼</span>
                    </div>
                    <div class="category-details" id="food-details">
                        <!-- 식비 상세 내역 -->
                    </div>
                </div>
                
                <div class="category-item">
                    <div class="category-header" onclick="toggleCategory('transport')">
                        <span class="category-name">자동차</span>
                        <span class="category-total" id="transport-total">(0원)</span>
                        <span class="toggle-icon" id="transport-toggle">▼</span>
                    </div>
                    <div class="category-details" id="transport-details">
                        <div class="subcategory">
                            <div class="subcategory-header" onclick="toggleSubcategory('parking')">
                                <span>주차비</span>
                                <span id="parking-total">(0원)</span>
                                <span class="toggle-icon" id="parking-toggle">▼</span>
                            </div>
                            <div class="subcategory-details" id="parking-details">
                                <!-- 주차비 상세 내역 -->
                            </div>
                        </div>
                        <div class="subcategory">
                            <div class="subcategory-header" onclick="toggleSubcategory('insurance')">
                                <span>보험료</span>
                                <span id="insurance-total">(0원)</span>
                                <span class="toggle-icon" id="insurance-toggle">▼</span>
                            </div>
                            <div class="subcategory-details" id="insurance-details">
                                <!-- 보험료 상세 내역 -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
            <!-- 인사이트 패널 -->
            <div class="insights-panel">
                <div class="insight-card">
                    <div class="insight-header">
                        <h3>💡 이번 달 인사이트</h3>
                        <button class="insight-toggle" onclick="toggleInsights()">📊</button>
                    </div>
                    <div class="insight-content" id="insightContent">
                        <div class="insight-item">
                            <span class="insight-label">가장 많이 쓴 카테고리</span>
                            <span class="insight-value" id="topCategory">식비</span>
                        </div>
                        <div class="insight-item">
                            <span class="insight-label">평균 일일 지출</span>
                            <span class="insight-value" id="dailyAverage">0원</span>
                        </div>
                        <div class="insight-item">
                            <span class="insight-label">지난 달 대비</span>
                            <span class="insight-value trend" id="monthlyTrend">+0%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 사이드 패널 오버레이 -->
        <div class="side-panel-overlay" id="sidePanelOverlay" onclick="closeSidePanel()"></div>
        
        <!-- 사이드 패널 -->
        <div class="side-panel" id="sidePanel">
            <div class="panel-header">
                <h3 id="panelTitle">지출 관리</h3>
                <button class="panel-close" onclick="closeSidePanel()">✕</button>
            </div>
            
            <div class="panel-content" id="panelContent">
                <!-- 빠른 입력 폼 -->
                <div class="quick-input-form" id="quickInputForm">
                    <div class="form-group">
                        <label>지출 내용</label>
                        <input type="text" id="quickExpenseName" placeholder="예: 점심식사, 주유비">
                    </div>
                    
                    <div class="form-group">
                        <label>카테고리</label>
                        <div class="category-grid">
                            <button class="category-btn" data-category="food">🍽️ 식비</button>
                            <button class="category-btn" data-category="transport">🚗 교통</button>
                            <button class="category-btn" data-category="shopping">🛍️ 쇼핑</button>
                            <button class="category-btn" data-category="entertainment">🎮 여가</button>
                            <button class="category-btn" data-category="health">💊 건강</button>
                            <button class="category-btn" data-category="other">📦 기타</button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>금액</label>
                        <div class="amount-input">
                            <input type="number" id="quickExpenseAmount" placeholder="0">
                            <span class="currency">원</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>날짜</label>
                        <input type="date" id="quickExpenseDate">
                    </div>
                    
                    <button class="btn-primary full-width" onclick="saveQuickExpense()">
                        💾 저장하기
                    </button>
                </div>
                
                <!-- 이번 달 지출 목록 -->
                <div class="monthly-expenses-list" id="monthlyExpensesList">
                    <div class="expense-summary-card">
                        <h4>이번 달 지출 현황</h4>
                        <div class="expense-breakdown" id="expenseBreakdown">
                            <!-- 카테고리별 지출 내역 -->
                        </div>
                    </div>
                </div>
                
                <!-- 특별 구매 기록 -->
                <div class="special-purchases-form" id="specialPurchasesForm">
                    <div class="form-group">
                        <label>구매 물품</label>
                        <input type="text" id="specialItemName" placeholder="예: iPhone 15, 냉장고">
                    </div>
                    
                    <div class="form-group">
                        <label>구매 가격</label>
                        <div class="amount-input">
                            <input type="number" id="specialItemPrice" placeholder="0">
                            <span class="currency">원</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>구매 날짜</label>
                        <input type="date" id="specialPurchaseDate">
                    </div>
                    
                    <button class="btn-primary full-width" onclick="saveSpecialPurchase()">
                        🛍️ 기록하기
                    </button>
                    
                    <div class="special-purchases-list" id="specialPurchasesList">
                        <!-- 특별 구매 목록 -->
                    </div>
                </div>
            </div>
        </div>

        <!-- 플로팅 액션 버튼 -->
        <button class="floating-action-btn" onclick="quickAddExpense()" title="빠른 지출 입력">
            ➕
        </button>

        <!-- 토스트 알림 -->
        <div class="toast" id="toast">
            <div class="toast-content">
                <span class="toast-icon">✅</span>
                <span class="toast-message" id="toastMessage">저장되었습니다!</span>
            </div>
        </div>
    </div>
    
    <script src="script.js"></script>
    <script src="ux-script.js"></script>
</body>
</html>