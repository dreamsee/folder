# 🚗 노트 정비소 프로젝트 설계서

## 📖 프로젝트 개요
**목적**: AI 기반 웹페이지 직관적 편집 도구
**대상**: 비개발자도 쉽게 사용할 수 있는 WYSIWYG 편집 환경
**핵심 가치**: "복잡함을 단순함으로, 어려움을 쉬움으로"

## 🏗️ 시스템 아키텍처

### 전체 구조
```
┌─────────────────────────────────────────┐
│            사용자 브라우저               │
├─────────────────────────────────────────┤
│  AI 채팅 │   코드 편집기   │ 실시간 미리보기 │
│          │                │            │
│  대화형   │ HTML/CSS/JS    │   Live      │
│  요청     │   탭 편집       │  Preview    │
└─────────────────────────────────────────┘
           ↕ HTTP/WebSocket
┌─────────────────────────────────────────┐
│            백엔드 서버                   │
├─────────────────────────────────────────┤
│  Claude API │ 파일 관리 │ 프록시 서버    │
│             │          │               │
│  자연어      │ 백업/복구 │ CORS 우회     │
│  처리        │          │               │
└─────────────────────────────────────────┘
```

### 핵심 컴포넌트

#### 1. **프론트엔드 (3분할 구조)**
- **AI 채팅 패널** (30%): 사용자 요청 입력 및 AI 응답
- **코드 편집기** (40%): HTML/CSS/JavaScript 탭 편집
- **실시간 미리보기** (30%): 변경사항 즉시 반영

#### 2. **백엔드 서버**  
- **Express.js 기반 API 서버**
- **Claude API 통합**: 자연어 → 코드 변환
- **파일 시스템 관리**: 읽기/쓰기/백업
- **프록시 서버**: 외부 사이트 CORS 해결

#### 3. **데이터 저장**
```
📁 workspace/
├── current-note/ (현재 작업 파일)
├── backups/ (자동 백업)
├── templates/ (템플릿 파일들)
└── exports/ (다운로드 파일들)
```

## 🎯 핵심 기능 명세

### 1. **비주얼 선택 시스템**
- **목적**: 마우스 클릭으로 요소 직접 편집
- **구현**: Chrome DevTools 스타일 요소 선택
- **기능**:
  - 호버시 하이라이트 표시
  - 클릭시 편집 패널 표시
  - 실시간 속성 변경

### 2. **변경사항 추적 시스템**
- **목적**: 모든 수정 내역 자동 기록
- **구현**: ChangeTracker 클래스
- **기능**:
  - 변경 전/후 값 기록
  - 시간 스탬프 추가
  - 마크다운 리포트 생성

### 3. **AI 코드 생성**
- **목적**: 자연어 요청을 코드로 변환
- **구현**: Claude API 통합
- **기능**:
  - "배경을 파란색으로" → CSS 생성
  - "버튼 추가해줘" → HTML 생성
  - 컨텍스트 기반 코드 최적화

### 4. **실시간 미리보기**
- **목적**: 변경사항 즉시 확인
- **구현**: iframe + srcdoc 업데이트
- **기능**:
  - 자동 새로고침
  - 반응형 테스트
  - 오류 표시

## 📊 데이터 흐름

### 일반적인 편집 플로우
```
1. 사용자 요청 ("제목을 크게 해줘")
   ↓
2. AI 채팅 패널에서 Claude API 호출
   ↓  
3. 자연어 → CSS 코드 변환
   ↓
4. 코드 편집기에 변경사항 적용
   ↓
5. 실시간 미리보기 자동 업데이트
   ↓
6. ChangeTracker에 변경 이력 기록
```

### 직접 편집 플로우
```
1. 비주얼 선택 모드 활성화
   ↓
2. 미리보기에서 요소 클릭
   ↓
3. 편집 패널 표시 (색상, 크기 등)
   ↓
4. 실시간 속성 변경
   ↓
5. 코드 편집기에 자동 반영
   ↓
6. 변경사항 추적에 기록
```

## 🛡️ 보안 및 안전성

### 보안 조치
- **Rate Limiting**: API 호출 제한
- **입력 검증**: XSS 방지
- **파일 접근 제한**: workspace 폴더만 접근
- **토큰 보호**: Claude API 키 환경변수 관리

### 백업 전략
- **자동 백업**: 변경시마다 백업 생성
- **타임스탬프**: 복구 지점 관리  
- **버전 관리**: Git 연동
- **원격 백업**: 클라우드 동기화

## 🔧 기술 스택

### 프론트엔드
- **HTML5**: 시멘틱 마크업
- **CSS3**: Flexbox, Grid, 애니메이션
- **Vanilla JavaScript**: ES6+, 모듈 시스템
- **WebAPIs**: File System Access, postMessage

### 백엔드  
- **Node.js**: 런타임 환경
- **Express.js**: 웹 프레임워크
- **Multer**: 파일 업로드 처리
- **Axios**: HTTP 클라이언트

### 외부 API
- **Claude API**: AI 코드 생성
- **File System Access API**: 로컬 파일 접근

## 📈 확장성 고려사항

### 수평 확장
- 마이크로서비스 아키텍처 도입
- API Gateway 패턴
- 로드 밸런서 적용

### 기능 확장
- 플러그인 시스템 도입
- 템플릿 마켓플레이스
- 협업 기능 (실시간 편집)
- 버전 관리 UI

### 성능 최적화
- 코드 스플리팅
- 레이지 로딩
- CDN 적용
- 캐싱 전략

## 🚨 위험 요소 및 대응방안

### 기술적 위험
- **Claude API 장애**: 로컬 백업 모드
- **브라우저 호환성**: 폴리필 적용
- **메모리 누수**: 정기 정리 로직

### 비즈니스 위험  
- **사용자 학습곡선**: 온보딩 튜토리얼
- **복잡도 증가**: 기능 우선순위 관리
- **경쟁 제품**: 차별화 포인트 강화

## 📋 개발 로드맵

### Phase 1 (현재)
- [x] 3분할 IDE 기본 구조
- [x] 비주얼 선택 시스템
- [x] 변경사항 추적
- [ ] AI 코드 생성 개선

### Phase 2 (다음)  
- [ ] 템플릿 시스템
- [ ] 배포 자동화
- [ ] 성능 최적화
- [ ] 사용자 테스트

### Phase 3 (미래)
- [ ] 협업 기능
- [ ] 플러그인 시스템
- [ ] 모바일 최적화
- [ ] 클라우드 연동

---
**문서 버전**: 1.0  
**최종 업데이트**: 2025-08-07  
**담당자**: Claude Code Assistant