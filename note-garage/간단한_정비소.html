<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🚗 간단한 노트 정비소</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', sans-serif;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .toolbar {
            height: 60px;
            background: #343a40;
            color: white;
            display: flex;
            align-items: center;
            padding: 0 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .logo {
            font-size: 20px;
            font-weight: 600;
        }
        
        .main-container {
            display: flex;
            flex: 1;
            height: calc(100vh - 60px);
        }
        
        .chat-panel {
            width: 30%;
            background: #f8f9fa;
            border-right: 1px solid #ddd;
            display: flex;
            flex-direction: column;
        }
        
        .editor-panel {
            width: 35%;
            background: #2d3748;
            border-right: 1px solid #ddd;
            display: flex;
            flex-direction: column;
        }
        
        .preview-panel {
            width: 35%;
            background: white;
            display: flex;
            flex-direction: column;
        }
        
        .panel-header {
            height: 50px;
            background: #e9ecef;
            display: flex;
            align-items: center;
            padding: 0 15px;
            font-weight: 600;
            border-bottom: 1px solid #ddd;
        }
        
        .chat-messages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
        }
        
        .message {
            margin-bottom: 15px;
        }
        
        .message-content {
            padding: 10px 15px;
            border-radius: 10px;
            max-width: 90%;
        }
        
        .ai-message .message-content {
            background: #e3f2fd;
            color: #1565c0;
        }
        
        .user-message .message-content {
            background: #2196f3;
            color: white;
            margin-left: auto;
        }
        
        .chat-input-area {
            padding: 15px;
            border-top: 1px solid #ddd;
            display: flex;
            gap: 10px;
        }
        
        .chat-input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            resize: none;
        }
        
        .send-button {
            padding: 10px 20px;
            background: #2196f3;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }
        
        .code-editor {
            flex: 1;
            padding: 15px;
            background: #2d3748;
            color: #e2e8f0;
            border: none;
            font-family: 'Consolas', monospace;
            font-size: 14px;
            resize: none;
            outline: none;
        }
        
        .preview-iframe {
            flex: 1;
            border: none;
        }
    </style>
</head>
<body>
    <!-- 상단 툴바 -->
    <div class="toolbar">
        <div class="logo">🚗 노트 정비소</div>
    </div>

    <!-- 메인 컨테이너 -->
    <div class="main-container">
        <!-- 왼쪽: AI 채팅 -->
        <div class="chat-panel">
            <div class="panel-header">💬 AI 정비사</div>
            <div class="chat-messages" id="chatMessages">
                <div class="message ai-message">
                    <div class="message-content">
                        안녕하세요! 노트 정비소입니다 🚗<br><br>
                        다음과 같이 말해보세요:<br>
                        • "배경을 파란색으로 바꿔줘"<br>
                        • "제목을 더 크게 만들어줘"<br>
                        • "버튼 색상을 빨간색으로 해줘"
                    </div>
                </div>
            </div>
            <div class="chat-input-area">
                <textarea class="chat-input" id="chatInput" placeholder="AI에게 요청사항을 입력하세요..."></textarea>
                <button class="send-button" onclick="sendMessage()">전송</button>
            </div>
        </div>

        <!-- 가운데: 코드 에디터 -->
        <div class="editor-panel">
            <div class="panel-header" style="background: #4a5568; color: white;">📝 코드 편집기</div>
            <textarea class="code-editor" id="codeEditor" spellcheck="false"></textarea>
        </div>

        <!-- 오른쪽: 미리보기 -->
        <div class="preview-panel">
            <div class="panel-header">👁️ 실시간 미리보기</div>
            <iframe class="preview-iframe" id="previewFrame"></iframe>
        </div>
    </div>

    <script>
        // 초기 HTML 코드
        const initialCode = `<!DOCTYPE html>
<html>
<head>
    <style>
        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            text-align: center;
            font-family: Arial, sans-serif;
        }
        
        h1 {
            color: #333;
            margin-bottom: 20px;
        }
        
        .demo-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
        }
        
        .demo-button:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>안녕하세요! 노트 정비소입니다 🚗</h1>
        <p>AI와 함께 이 페이지를 수정해보세요!</p>
        <button class="demo-button" onclick="alert('버튼이 클릭되었습니다! 🎉')">클릭해보세요!</button>
    </div>
</body>
</html>`;

        // 초기화
        document.getElementById('codeEditor').value = initialCode;
        updatePreview();
        
        // 코드 에디터 실시간 업데이트
        document.getElementById('codeEditor').addEventListener('input', updatePreview);

        function updatePreview() {
            const code = document.getElementById('codeEditor').value;
            const frame = document.getElementById('previewFrame');
            frame.srcdoc = code;
        }

        function addMessage(type, content) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}-message`;
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            contentDiv.innerHTML = content.replace(/\n/g, '<br>');
            
            messageDiv.appendChild(contentDiv);
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            if (!message) return;

            addMessage('user', message);
            input.value = '';

            // 간단한 AI 응답 시뮬레이션
            setTimeout(() => {
                let response = '네, 디자인을 변경해드리겠습니다! 🎨';
                let codeChange = '';

                const lowerMessage = message.toLowerCase();
                if (lowerMessage.includes('파란') || lowerMessage.includes('blue')) {
                    response = '배경색을 파란색으로 변경했습니다! 💙';
                    codeChange = 'background: blue';
                } else if (lowerMessage.includes('빨간') || lowerMessage.includes('red')) {
                    response = '버튼 색상을 빨간색으로 변경했습니다! ❤️';
                    codeChange = 'background: red';
                } else if (lowerMessage.includes('크게') || lowerMessage.includes('bigger')) {
                    response = '글자 크기를 크게 만들었습니다! 📝';
                    codeChange = 'font-size: 24px';
                } else if (lowerMessage.includes('노란') || lowerMessage.includes('yellow')) {
                    response = '노란색으로 변경했습니다! 💛';
                    codeChange = 'background: yellow; color: black';
                }

                addMessage('ai', response);

                // 코드 실제 변경
                if (codeChange) {
                    const editor = document.getElementById('codeEditor');
                    let code = editor.value;
                    
                    if (lowerMessage.includes('배경') || lowerMessage.includes('background')) {
                        code = code.replace(/background:\s*[^;]+;/g, codeChange + ';');
                        code = code.replace(/body\s*{/, `body {
            ${codeChange};`);
                    } else if (lowerMessage.includes('버튼')) {
                        code = code.replace(/\.demo-button\s*{[^}]*}/, 
                            `.demo-button {
            ${codeChange};
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
        }`);
                    } else if (lowerMessage.includes('제목') || lowerMessage.includes('h1')) {
                        code = code.replace(/h1\s*{[^}]*}/, 
                            `h1 {
            color: #333;
            margin-bottom: 20px;
            ${codeChange};
        }`);
                    }
                    
                    editor.value = code;
                    updatePreview();
                }
            }, 1000);
        }

        // Enter 키로 메시지 전송
        document.getElementById('chatInput').addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });
    </script>
</body>
</html>