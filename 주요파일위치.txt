YouTube 노트 앱 주요 파일 위치 및 코드 매핑
===========================================

=== 1. 기본 파일 분류 ===

메인 페이지:
- client/src/pages/HomePage.tsx: 전체 레이아웃과 상태 관리

핵심 컴포넌트:
- client/src/components/NoteArea.tsx: 노트 영역 및 재생 컨트롤
- client/src/components/YouTubePlayer.tsx: YouTube 플레이어
- client/src/components/VideoLoader.tsx: 영상 검색 및 로딩

UI 컴포넌트:
- client/src/components/SettingsPanel.tsx: 우측 설정 패널
- client/src/components/CommentSidePanel.tsx: 왼쪽 댓글 사이드 패널 (스와이프/호버 활성화)
- client/src/components/TextOverlay.tsx: 화면 텍스트 오버레이
- client/src/components/OverlayInput.tsx: 오버레이 입력 패널
- client/src/components/ChapterBar.tsx: YouTube 챕터 바
- client/src/components/TimeSkipControls.tsx: 영상 건너뛰기
- client/src/components/FavoriteManager.tsx: 즐겨찾기 관리
- client/src/components/ScreenLock.tsx: 화면 잠금

왼쪽탭 레이아웃:
- client/src/components/LeftSidebarTabs.tsx: 왼쪽 세로 탭 컴포넌트 (노트/화면글자/돋보기)
- client/src/components/ZoomContent.tsx: 돋보기(화면 확대) 탭 컨텐츠

모달 및 입력:
- client/src/components/TimestampEditModal.tsx: 타임스탬프 편집 모달
- client/src/components/CommentModal.tsx: 댓글 상세보기 모달 (평가 시스템)
- client/src/components/CommentInputModal.tsx: 댓글 입력 모달 (별점 선택)
- client/src/components/FolderSelector.tsx: 폴더 선택기
- client/src/components/CoordinateInput.tsx: 좌표 입력
- client/src/components/PositionGrid.tsx: 위치 그리드

멀티페이지 노트:
- client/src/components/NoteTabs.tsx: 북마크 스타일 탭 인터페이스
- client/src/types/NotePage.ts: 멀티페이지 타입 정의

녹화 기능:
- client/src/components/RecordingMode.tsx: 녹화 모드
- client/src/components/RecordingSessionList.tsx: 녹화 세션 목록
- client/src/components/RecordingSessionCard.tsx: 녹화 세션 카드

유틸리티:
- client/src/components/SimpleNoteArea.tsx: 타임스탬프 로직 참고용
- client/src/components/ErrorBoundary.tsx: 에러 경계
- client/src/components/Notification.tsx: 알림
- client/src/components/DebugLogPanel.tsx: 모바일 디버그 로그
- client/src/lib/youtubeUtils.ts: YouTube 유틸리티 (formatTime 등)
- client/src/utils/chapterParser.ts: 챕터 파싱

테스트 페이지:
- client/src/pages/TestTimestampPage.tsx: 타임스탬프 테스트 (http://localhost:5174/test-timestamp)
- client/src/pages/TestOverlayPage.tsx: 텍스트 오버레이 테스트 (http://localhost:5174/test-overlay)
- client/src/pages/TestZoomPage.tsx: 줌 기능 테스트 (http://localhost:5174/test-zoom)
- client/src/pages/TestDrawingPage.tsx: 드로잉 오버레이 테스트 (http://localhost:5174/test-drawing)

서버:
- server/index.ts: Express 서버 메인
- server/routes.ts: API 라우트

=== 2. 기능별 코드 위치 매핑 ===

타임스탬프 자동 실행 시스템:
- NoteArea.tsx:570-607 requestAnimationFrame 기반 고정밀 추적 시스템
- NoteArea.tsx:281-567 processTimestamps() 통합 타임스탬프 처리 함수
- NoteArea.tsx:233-278 detectManualMove() 수동 이동 감지
- NoteArea.tsx:295-306 우선순위 기반 타임스탬프 찾기 (lastActiveIndex + 1부터 체크)
- NoteArea.tsx:334-491 타임스탬프 진입 처리 (currentStamp && isDifferentTimestamp)
- NoteArea.tsx:494-563 타임스탬프 이탈 처리 (!currentStamp && activeTimestamp)
- NoteArea.tsx:1180-1360 더블클릭 핸들러 (handleNoteClick 내부)
- NoteArea.tsx:1282-1283 더블클릭시 lastActiveIndex 설정 (clickedIndex - 1로 설정 필수)
- NoteArea.tsx:1234-1250 더블클릭시 타임스탬프 설정 즉시 적용
- NoteArea.tsx:1308-1323 더블클릭시 정지 액션 즉시 실행
- NoteArea.tsx:855 addTimestamp() 도장 버튼 함수
- NoteArea.tsx:945 openTimestampModal() 편집 버튼
- NoteArea.tsx:2058-2078 전체 도장 가져오기 세로 버튼 (왼쪽탭 레이아웃 전용)
- YouTubePlayer.tsx:커스텀바렌더링 커스텀 진행바 하이라이트
- HomePage.tsx:timestamps상태 timestamps 상태 관리

화면 오버레이 시스템:
- TextOverlay.tsx:전체컴포넌트 텍스트 표시 로직
- OverlayInput.tsx:전체컴포넌트 입력 패널 로직
- SettingsPanel.tsx:화면텍스트섹션 오버레이 설정 UI
- HomePage.tsx:오버레이상태들 오버레이 관련 상태 관리

영상 로딩 및 재생:
- VideoLoader.tsx:handleVideoSelect 영상 선택 및 시청횟수 증가
- YouTubePlayer.tsx:loadVideoById YouTube API 영상 로딩
- YouTubePlayer.tsx:onPlayerStateChange 재생 상태 변화 처리
- FavoriteManager.tsx:handleVideoPlay 즐겨찾기 영상 재생
- HomePage.tsx:currentVideoId currentVideoId 상태 관리

설정 관리:
- SettingsPanel.tsx:전체컴포넌트 모든 설정 UI (총 843줄)
- SettingsPanel.tsx:650-651 재생컨트롤.전체표시 토글 스위치
- SettingsPanel.tsx:655-715 재생 컨트롤 하위 설정들 (볼륨/속도/녹화/도장/편집)
- SettingsPanel.tsx:400-500 재생 기본값 설정 (기본 재생 속도)
- SettingsPanel.tsx:12-50 UISettings 인터페이스 정의
- HomePage.tsx:uiSettings UISettings 상태 관리
- NoteArea.tsx:재생기본값적용 새 영상 로드시 기본값 적용
- YouTubePlayer.tsx:설정동기화 플레이어 설정 동기화

볼륨/속도 제어:
- NoteArea.tsx:1483-1485 현재 볼륨/속도 표시 UI ({Math.round(volume || 100)}%, {(currentRate || 1.0).toFixed(2)}x)
- NoteArea.tsx:드래그컨트롤 드래그 기반 볼륨/속도 조정 (1490-1499줄 영역)
- NoteArea.tsx:상태관리 사용자 설정 상태
- NoteArea.tsx:플레이어동기화useEffect 플레이어와 UI 동기화

챕터 및 네비게이션:
- ChapterBar.tsx:전체컴포넌트 챕터 표시 및 페이지네이션
- chapterParser.ts:전체파일 챕터 파싱 로직
- YouTubePlayer.tsx:챕터연동 챕터 데이터 처리

녹화 시스템:
- NoteArea.tsx:851-872 녹화토글() 녹화 시작/중지 함수
- NoteArea.tsx:874-879 수동타임스탬프추가() 수동 타임스탬프 추가
- NoteArea.tsx:1712-1715 녹화 중 표시 UI (● 녹화 중)
- NoteArea.tsx:1737-1745 RecordingSessionList 컴포넌트 렌더링
- RecordingSessionList.tsx:전체컴포넌트 세션 목록 관리
- RecordingSessionCard.tsx:전체컴포넌트 개별 세션 카드
- HomePage.tsx:녹화상태 녹화 관련 상태

댓글 사이드 패널:
- CommentSidePanel.tsx:33-46 메인 컴포넌트 상태 관리 (isOpen, comments, sortBy, isLoading)
- CommentSidePanel.tsx:49-86 extractTimestamps() 타임스탬프 추출 함수 (HH:MM:SS, MM:SS 형식)
- CommentSidePanel.tsx:89-131 loadComments() YouTube API 댓글 로드 (textOriginal 우선 사용)
- CommentSidePanel.tsx:104 textOriginal 필드 사용으로 HTML 태그 제거
- CommentSidePanel.tsx:133-161 sortComments() 클라이언트 사이드 정렬 (4가지 옵션)
- CommentSidePanel.tsx:164-169 handleTimestampClick() 타임스탬프 클릭시 영상 시간 이동
- CommentSidePanel.tsx:172-191 터치 이벤트 처리 (모바일 스와이프 50px 트리거 영역)
- CommentSidePanel.tsx:201-210 스와이프 트리거 영역 (width: 50px, 왼쪽 가장자리)
- CommentSidePanel.tsx:226-230 useEffect videoId/sortBy 변경시 댓글 재로드
- CommentSidePanel.tsx:232-235 정렬된 댓글 필터링 (타임스탬프 댓글 분리)
- CommentSidePanel.tsx:285-294 정렬 드롭다운 UI (관련성순, 최신순, 인기순, 타임스탬프 우선)
- CommentSidePanel.tsx:310-325 타임스탬프 우선 정렬시 별도 섹션 표시 (파란색 배경)
- CommentSidePanel.tsx:274-279 CommentItem 컴포넌트 (개별 댓글 렌더링)
- CommentSidePanel.tsx:281-319 renderTextWithTimestamps() 타임스탬프를 클릭 가능한 링크로 변환
- HomePage.tsx:13 CommentSidePanel import
- HomePage.tsx:458-465 CommentSidePanel 조건부 렌더링 (currentVideoId 존재시)
- server/routes.ts:319-381 YouTube 댓글 API 엔드포인트 (/api/youtube/comments/:videoId)
→ 수정 시 주의: textOriginal과 textDisplay 차이 (HTML 포함 여부), 스와이프 영역 50px 유지 필요

드로잉 오버레이 시스템:
- TestDrawingPage.tsx:10-24 Stroke 및 DrawingData 인터페이스 정의
- TestDrawingPage.tsx:37-43 그리기 관련 state (isDrawing, currentDrawing, tempStrokes)
- TestDrawingPage.tsx:55 isDrawingMode 토글 state (영상 터치 vs 그리기 모드 전환)
- TestDrawingPage.tsx:91-154 Canvas 마우스/터치 이벤트 핸들러 (좌표 스케일 보정)
- TestDrawingPage.tsx:143-151 터치 완료시 tempStrokes에 스트로크 추가 (누적)
- TestDrawingPage.tsx:156-184 drawOnCanvas() Canvas 렌더링 (저장된 그림 + 임시 그림 + 현재 그리는 중)
- TestDrawingPage.tsx:238-268 renderStroke() 개별 스트로크 렌더링 (펜/화살표/사각형/원)
- TestDrawingPage.tsx:270-291 saveDrawing() 모든 임시 스트로크를 하나의 DrawingData로 저장
- TestDrawingPage.tsx:293-315 localStorage 로드/저장 (videoId별)
- TestDrawingPage.tsx:353-367 deleteDrawing() 그리기 삭제
- TestDrawingPage.tsx:451-460 그리기 모드 토글 버튼 UI
- TestDrawingPage.tsx:476-492 Canvas 오버레이 (isDrawingMode에 따라 pointerEvents 전환)
- TestDrawingPage.tsx:519-539 저장 버튼 (tempStrokes 개수 표시)
- App.tsx:11 TestDrawingPage import
- App.tsx:30 /test-drawing 라우트
→ 수정 시 주의: Canvas 크기와 표시 크기 비율(scaleX, scaleY) 보정 필수, 여러 스트로크를 하나의 DrawingData로 통합

타임스탬프 생성 및 편집:
- NoteArea.tsx:874-879 수동타임스탬프추가() 수동 타임스탬프 생성 (녹화 모드)
- NoteArea.tsx:1709 도장 형식 안내 UI ([HH:MM:SS.sss, 100%, 1.00x])
- NoteArea.tsx:1748-1749 TimestampEditModal 렌더링
- TimestampEditModal.tsx:전체컴포넌트 타임스탬프 편집 UI

멀티페이지 노트 시스템:
- HomePage.tsx:페이지상태 pageState (pages, activePageIndex) 관리
- NoteTabs.tsx:전체컴포넌트 탭 인터페이스 (편집, 드래그앤드롭, 이모지/색상 선택)
- NoteTabs.tsx:48-57 탭 클릭 핸들러 (재클릭시 편집 모드)
- NoteTabs.tsx:75-103 드래그앤드롭 정렬 (특수 페이지 제외)
- NoteTabs.tsx:187 삭제 조건 (특수 페이지가 아니고 일반 페이지가 2개 이상일 때)
- NoteArea.tsx:350-405 handleImportTimestamps() 타임스탬프 가져오기 기능
- NoteArea.tsx:379-390 타임스탬프 다음 첫 줄바꿈까지 텍스트 추출
- NoteArea.tsx:175-242 타임스탬프 가져오기 UI (전체 페이지 전용)
- NotePage.ts:14-17 NotePageState 인터페이스 (pages, activePageIndex)
- NotePage.ts:36-44 SPECIAL_PAGES 설정 (전체 타임스탬프 페이지)

노트 영역 UI:
- NoteArea.tsx:1684-1705 노트 영역 Textarea 컴포넌트 (총 1765줄)
- NoteArea.tsx:1700-1704 스크롤 관련 스타일 (WebkitOverflowScrolling, scrollbar-hide)
- NoteArea.tsx:1721-1734 OverlayInput 컴포넌트 렌더링 (화면텍스트 패널)
- NoteTabs.tsx:250-255 탭 컨테이너 스크롤바 숨김 (webkit-scrollbar: none)
- index.css:118-129 스크롤바 숨기기 유틸리티 클래스 (.scrollbar-hide)

재생 컨트롤 (하단 패널):
- NoteArea.tsx:1469-1470 재생 컨트롤 섹션 조건부 렌더링
- NoteArea.tsx:1475-1486 메인 드래그 컨트롤 헤더 (모드 전환 버튼, 볼륨/속도 표시)
- NoteArea.tsx:1490-1499 일반 모드: 드래그 컨트롤 영역
- NoteArea.tsx:851-872 녹화토글() 녹화 시작/중지 함수
- NoteArea.tsx:874-879 수동타임스탬프추가() 수동 타임스탬프 함수
- NoteArea.tsx:1712-1715 녹화 중 표시 UI

플레이어 내장 컨트롤 시스템:
- YouTubePlayer.tsx:558-576 재생 컨트롤 버튼 (좌측 하단, Settings2 아이콘, z-40)
- YouTubePlayer.tsx:559 버튼 조건: !uiSettings.재생컨트롤?.전체표시 && !isControlsModalOpen
- YouTubePlayer.tsx:617-620 컴팩트 재생 컨트롤 패널 컨테이너 (z-50, data-control-panel="true")
- YouTubePlayer.tsx:622-643 볼륨 조절 슬라이더 (0-100%, 5단위, 실시간 표시)
- YouTubePlayer.tsx:645-668 속도 조절 슬라이더 (0.25x-2.0x, 0.05단위, 실시간 표시)
- YouTubePlayer.tsx:670-689 재생/일시정지 버튼 및 닫기 버튼
- YouTubePlayer.tsx:74-75 currentVolume, currentSpeed 상태 관리
- YouTubePlayer.tsx:71 isControlsModalOpen 패널 열림/닫힘 상태
- YouTubePlayer.tsx:561-568 패널 열 때 플레이어 현재값 동기화 (getVolume/getPlaybackRate)
- YouTubePlayer.tsx:147-160 togglePlayPause() 재생/일시정지 토글 함수
- SettingsPanel.tsx:재생컨트롤설정 재생컨트롤.전체표시 토글 (false일 때 플레이어 내장 모드)
- HomePage.tsx:uiSettings uiSettings 상태를 YouTubePlayer에 전달

우선순위 및 순차 실행:
- NoteArea.tsx:lastActiveIndex lastActiveIndex 상태 (타임스탬프 우선순위)
- NoteArea.tsx:우선순위검색로직 우선순위 기반 타임스탬프 검색
- NoteArea.tsx:수동이동시우선순위재설정 수동 이동시 우선순위 재설정

왼쪽탭 레이아웃 시스템:
- LeftSidebarTabs.tsx:9-17 탭 정의 (노트/화면글자/돋보기)
- LeftSidebarTabs.tsx:19-102 세로 탭 UI 컴포넌트 (27px 폭, 48px 높이)
- LeftSidebarTabs.tsx:40-84 탭별 활성화 색상 (노트:보라, 화면글자:초록, 돋보기:주황)
- ZoomContent.tsx:8-22 확대 설정 데이터 타입 (중심점, 배율, 시간, 테두리)
- ZoomContent.tsx:70-86 확대 설정 저장/삭제 기능
- ZoomContent.tsx:88-105 좌표/시간 변경 핸들러
- ZoomContent.tsx:115-380 확대 설정 UI (좌표입력/목록관리 탭)
- NoteArea.tsx:16 LeftSidebarTabs import 구문
- NoteArea.tsx:140 activeMainTab 상태 관리 ('note' | 'overlay' | 'zoom')
- NoteArea.tsx:2007-2008 LeftSidebarTabs 컴포넌트 렌더링
- NoteArea.tsx:2015 노트 탭 컨텐츠 조건부 렌더링 (activeMainTab === 'note')
- NoteArea.tsx:2076 화면텍스트 탭 컨텐츠 조건부 렌더링 (activeMainTab === 'overlay')
- NoteArea.tsx:2093 돋보기 탭 컨텐츠 조건부 렌더링 (activeMainTab === 'zoom')
- SettingsPanel.tsx:35 UISettings 인터페이스 왼쪽탭레이아웃 설정 정의
- SettingsPanel.tsx:736-738 왼쪽탭 레이아웃 토글 설정 UI 및 핸들러
- NoteTabs.tsx:243-244 스크롤바 thin 스타일 설정
- NoteTabs.tsx:250 스크롤바 숨김 설정 (scrollbar-width: none)
- NoteTabs.tsx:253 웹킷 스크롤바 숨김 처리 (::-webkit-scrollbar)

테스트 환경:
- client/src/pages/TestTimestampPage.tsx: 타임스탬프 기능 독립 테스트 페이지
- client/src/pages/TestOverlayPage.tsx: 텍스트 오버레이 테스트 페이지 (가상키보드 최적화 레이아웃)
- client/src/pages/TestZoomPage.tsx: 화면 확대 줌 테스트 페이지 (CSS transform 기반)
- client/src/pages/TestSharePage.tsx: 공유 기능 독립 테스트 페이지
- client/src/components/SimpleNoteArea.tsx: 타임스탬프 로직 참고용 컴포넌트
- client/src/components/SimpleShareArea.tsx: 공유 로직 참고용 컴포넌트
- client/src/components/TabLayoutSettings.tsx: 동적 탭 설정 모달
- client/src/components/SimpleTabSettings.tsx: 간단한 탭 설정 모달
- client/src/App.tsx: 테스트 페이지 라우팅 설정

가상 키보드 최적화 시스템 (TestOverlayPage):
- TestOverlayPage.tsx:1030-1063 헤더 바로 아래 가로 탭 네비게이션
- TestOverlayPage.tsx:430-520 텍스트 영역 최상단 배치 (비디오 플레이어와 최대한 근접)
- TestOverlayPage.tsx:434 사용자 팁: "노트 영역을 화면 중앙에 위치시킨 후 클릭하면 영상이 덜 밀려남"
- TestOverlayPage.tsx:953-961 오버레이 목록 상세 정보 표시
- TestOverlayPage.tsx:317-360 editOverlay() 편집 기능 (359줄: 탭 자동 이동 방지)
- TabLayoutSettings.tsx:전체컴포넌트 동적 탭 구성 설정 모달

화면 확대 줌 시스템:
- TestZoomPage.tsx:401-444 CSS transform 기반 줌 스타일 생성 (generateZoomStyle)
- TestZoomPage.tsx:310-353 requestAnimationFrame 기반 시간 추적 및 자동 줌 활성화
- TestZoomPage.tsx:20-113 TimeArrowControl 컴포넌트 (분:초 형태, 굵은 삼각화살표 ▲▼)
- TestZoomPage.tsx:125-245 CoordinateArrowControl 컴포넌트 (백의자리:십의자리:일의자리, 일반화살표 ↑↓)
- TestZoomPage.tsx:446-476 renderZoomArea() 실시간 줌 영역 미리보기 (빨간 네모)
- TestZoomPage.tsx:523-573 체크박스 기반 저장된 줌 설정 목록 (영상 플레이어 하단)
- TestZoomPage.tsx:329-339 좌상단 좌표 기준 transform-origin 설정
- YouTubePlayer.tsx:511-527 터치홀드 줌 CSS 스타일 (플레이어 컨테이너 iframe 타겟)
- YouTubePlayer.tsx:520-524 CSS transform 플레이어 iframe 직접 확대 (.youtube-player-container iframe)
- YouTubePlayer.tsx:79-80 touchPosition/overlayPosition 상태 분리 (iframe용/오버레이용)
- YouTubePlayer.tsx:515-518 플레이어 컨테이너 overflow hidden 설정
- YouTubePlayer.tsx:389-423 터치홀드 이벤트 핸들러 (컨트롤 패널 요소 감지 추가)
- YouTubePlayer.tsx:393-400 터치 타겟 컨트롤 패널 체크 (data-control-panel 속성)
- YouTubePlayer.tsx:409-413 컨테이너 기준 상대 좌표 변환 (relativeX/relativeY)
- YouTubePlayer.tsx:561-568 컨트롤 패널 열 때 플레이어 현재값 동기화
