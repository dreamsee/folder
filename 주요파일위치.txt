YouTube 노트 앱 주요 파일 위치 및 코드 매핑
===========================================

=== 1. 기본 파일 분류 ===

메인 페이지:
- client/src/pages/HomePage.tsx: 전체 레이아웃과 상태 관리

핵심 컴포넌트:
- client/src/components/NoteArea.tsx: 노트 영역 및 재생 컨트롤
- client/src/components/YouTubePlayer.tsx: YouTube 플레이어
- client/src/components/VideoLoader.tsx: 영상 검색 및 로딩

UI 컴포넌트:
- client/src/components/SettingsPanel.tsx: 우측 설정 패널
- client/src/components/TextOverlay.tsx: 화면 텍스트 오버레이
- client/src/components/OverlayInput.tsx: 오버레이 입력 패널
- client/src/components/ChapterBar.tsx: YouTube 챕터 바
- client/src/components/TimeSkipControls.tsx: 영상 건너뛰기
- client/src/components/FavoriteManager.tsx: 즐겨찾기 관리
- client/src/components/ScreenLock.tsx: 화면 잠금

모달 및 입력:
- client/src/components/TimestampEditModal.tsx: 타임스탬프 편집 모달
- client/src/components/CommentModal.tsx: 댓글 상세보기 모달 (평가 시스템)
- client/src/components/CommentInputModal.tsx: 댓글 입력 모달 (별점 선택)
- client/src/components/FolderSelector.tsx: 폴더 선택기
- client/src/components/CoordinateInput.tsx: 좌표 입력
- client/src/components/PositionGrid.tsx: 위치 그리드

녹화 기능:
- client/src/components/RecordingMode.tsx: 녹화 모드
- client/src/components/RecordingSessionList.tsx: 녹화 세션 목록
- client/src/components/RecordingSessionCard.tsx: 녹화 세션 카드

유틸리티:
- client/src/components/SimpleNoteArea.tsx: 타임스탬프 로직 참고용
- client/src/components/SimpleShareArea.tsx: 공유 노트 로직 참고용
- client/src/components/NoteOverlayPanel.tsx: 오버레이 노트 입력 패널
- client/src/components/ErrorBoundary.tsx: 에러 경계
- client/src/components/Notification.tsx: 알림
- client/src/components/DebugLogPanel.tsx: 모바일 디버그 로그
- client/src/lib/youtubeUtils.ts: YouTube 유틸리티 (formatTime 등)
- client/src/utils/chapterParser.ts: 챕터 파싱

테스트 페이지:
- client/src/pages/TestSharePage.tsx: 댓글 시스템 테스트 페이지

서버:
- server/index.ts: Express 서버 메인
- server/routes.ts: API 라우트

=== 2. 기능별 코드 위치 매핑 ===

🎯 타임스탬프 자동 실행 시스템:
- NoteArea.tsx:570-607 requestAnimationFrame 기반 고정밀 추적 시스템
- NoteArea.tsx:281-567 processTimestamps() 통합 타임스탬프 처리 함수
- NoteArea.tsx:233-278 detectManualMove() 수동 이동 감지
- NoteArea.tsx:295-306 우선순위 기반 타임스탬프 찾기 (lastActiveIndex + 1부터 체크)
- NoteArea.tsx:334-491 타임스탬프 진입 처리 (currentStamp && isDifferentTimestamp)
- NoteArea.tsx:494-563 타임스탬프 이탈 처리 (!currentStamp && activeTimestamp)
- NoteArea.tsx:1180-1360 더블클릭 핸들러 (handleNoteClick 내부)
- NoteArea.tsx:1282-1283 더블클릭시 lastActiveIndex 설정 (clickedIndex - 1로 설정 필수)
- NoteArea.tsx:1234-1250 더블클릭시 타임스탬프 설정 즉시 적용
- NoteArea.tsx:1308-1323 더블클릭시 정지 액션 즉시 실행
- NoteArea.tsx:855 addTimestamp() 도장 버튼 함수
- NoteArea.tsx:945 openTimestampModal() 편집 버튼
- YouTubePlayer.tsx:커스텀바렌더링 커스텀 진행바 하이라이트
- HomePage.tsx:timestamps상태 timestamps 상태 관리
→ 수정 시 주의:
  1. lastActiveIndex + 1 체크 로직 절대 변경 금지
  2. 더블클릭시 clickedIndex - 1 설정 필수
  3. 타임스탬프 설정 즉시 적용 필수
  4. 이탈시 재생 기본값 복원 변경 금지

📱 화면 오버레이 시스템:
- TextOverlay.tsx:전체컴포넌트 텍스트 표시 로직
- OverlayInput.tsx:전체컴포넌트 입력 패널 로직 (타임스탬프+텍스트 추출 포함)
- OverlayInput.tsx:74-119 parseTimestamps() 타임스탬프+설명텍스트 파싱
- OverlayInput.tsx:134-152 selectTimestamp() 설명텍스트 자동입력 & 실제지속시간 계산
- OverlayInput.tsx:484-505 지속시간 표시 (정수/소수점 이중표시)
- OverlayInput.tsx:511 "타임스탬프+텍스트 가져오기" 버튼
- OverlayInput.tsx:547-563 타임스탬프 선택 모달 (설명텍스트 미리보기 포함)
- NoteOverlayPanel.tsx:전체컴포넌트 오버레이 노트 입력 패널
- SettingsPanel.tsx:화면텍스트섹션 오버레이 설정 UI
- HomePage.tsx:오버레이상태들 오버레이 관련 상태 관리

🎬 영상 로딩 및 재생:
- VideoLoader.tsx:handleVideoSelect 영상 선택 및 시청횟수 증가
- YouTubePlayer.tsx:loadVideoById YouTube API 영상 로딩
- YouTubePlayer.tsx:onPlayerStateChange 재생 상태 변화 처리
- FavoriteManager.tsx:handleVideoPlay 즐겨찾기 영상 재생
- HomePage.tsx:currentVideoId currentVideoId 상태 관리

⚙️ 설정 관리:
- SettingsPanel.tsx:전체컴포넌트 모든 설정 UI
- SettingsPanel.tsx:783-790 지속시간 토글 (스타일설정 섹션 맨 아래)
- SettingsPanel.tsx:1080-1170 프리셋 설정 저장 로직 (최소모드/노트모드)
- SettingsPanel.tsx:1200-1270 실시간 프리셋 업데이트 (handleSettingChange)
- SettingsPanel.tsx:savePresetSettings() 프리셋별 설정 저장 함수
- HomePage.tsx:uiSettings UISettings 상태 관리
- NoteArea.tsx:재생기본값적용 새 영상 로드시 기본값 적용
- YouTubePlayer.tsx:설정동기화 플레이어 설정 동기화

🎵 볼륨/속도 제어:
- NoteArea.tsx:1362-1377 handleVolumeChange 볼륨 슬라이더
- NoteArea.tsx:1408-1421 handleSpeedChange 속도 슬라이더
- NoteArea.tsx:109-111 userSettings 사용자 설정 상태
- NoteArea.tsx:플레이어동기화useEffect 플레이어와 UI 동기화
→ 중복 주의: 볼륨/속도 변경이 여러 곳에서 발생하므로 동기화 확인 필수

📊 챕터 및 네비게이션:
- ChapterBar.tsx:전체컴포넌트 챕터 표시 및 페이지네이션
- chapterParser.ts:전체파일 챕터 파싱 로직
- YouTubePlayer.tsx:챕터연동 챕터 데이터 처리

🎥 녹화 시스템:
- RecordingMode.tsx:녹화토글 녹화 시작/중지
- RecordingSessionList.tsx:전체컴포넌트 세션 목록 관리
- RecordingSessionCard.tsx:전체컴포넌트 개별 세션 카드
- HomePage.tsx:녹화상태 녹화 관련 상태

🔧 타임스탬프 생성 및 편집:
- NoteArea.tsx:855 addTimestamp() 도장 버튼으로 타임스탬프 생성
- NoteArea.tsx:1425-1449 지속시간 입력 컨트롤
- TimestampEditModal.tsx:994 addTimestampFromModal() 편집 모달에서 생성
- TimestampEditModal.tsx:전체컴포넌트 타임스탬프 편집 UI

📝 노트 영역 UI:
- NoteArea.tsx:1682-1703 노트 영역 Textarea 컴포넌트
- NoteArea.tsx:1697-1702 스크롤 관련 스타일 (scrollbar-hide, WebkitOverflowScrolling)
- index.css:118-129 스크롤바 숨기기 유틸리티 클래스 (.scrollbar-hide)
→ 수정 시 주의: 터치 스크롤 기능은 유지하면서 스크롤바만 숨김

🎮 재생 컨트롤:
- NoteArea.tsx:1453-1474 녹화 버튼
- NoteArea.tsx:1477-1488 도장 버튼
- NoteArea.tsx:1490-1500 편집 버튼
- NoteArea.tsx:재생컨트롤UI 볼륨/속도 슬라이더 UI

🔍 우선순위 및 순차 실행:
- NoteArea.tsx:lastActiveIndex lastActiveIndex 상태 (타임스탬프 우선순위)
- NoteArea.tsx:우선순위검색로직 우선순위 기반 타임스탬프 검색
- NoteArea.tsx:수동이동시우선순위재설정 수동 이동시 우선순위 재설정

=== 3. 댓글 시스템 기능별 코드 위치 ===

📝 댓글 시스템 (미연결 상태):
- CommentModal.tsx:전체컴포넌트 댓글 조회, 필터링, 정렬
- CommentInputModal.tsx:전체컴포넌트 댓글 작성, 별점 선택
- TestSharePage.tsx:전체컴포넌트 댓글 시스템 테스트
- CommentModal.tsx:getAverageRatingByRange 별점 범위별 평균 점수 계산
- CommentInputModal.tsx:renderNewRatingSelector 가로 배치 별점 선택 UI
→ 연결 작업 필요: App.tsx에 import하여 메인 앱에서 사용 가능하게 해야 함