작업 날짜: 2025-01-03
작업명: YouTube 검색 필터 개선 및 블랙리스트 기능

구현 내용:
검색 결과 필터 구조 개선, 블랙리스트 기능 추가, 안 본 영상 15개 유지, 본 영상 정렬 기능

수정 파일 및 변경 내용:

1. server/routes.ts
   
   [수정된 코드]
   YouTube API 검색 부분:
   
   삭제됨:
   - maxResults=5 (5개만 가져오던 설정)
   
   추가됨:
   - maxResults=40 (40개로 증가)
   - 목업 데이터도 20개 반환하도록 수정
     for 루프로 20개 생성
   
2. client/src/components/VideoLoader.tsx
   
   [수정된 상태 관리]
   삭제됨:
   - filterMode: 'all' | 'watched' | 'unwatched'
   
   추가됨:
   - filterMode: 'watched' | 'blacklisted' | 'unwatched' (전체 제거)
   - watchedSortOrder: 'desc' | 'asc' (정렬 순서)
   
   [수정된 applyFilter 함수]
   삭제됨:
   - 단순 watchHistory만 확인하는 로직
   - 'all' 모드 처리
   
   추가됨:
   - blacklist localStorage 확인
   - watched 모드: 시청 횟수(watchCount) 기준 정렬 추가
   - blacklisted 모드: 블랙리스트 영상만 필터링
   - unwatched 모드: 시청 기록도 블랙리스트도 아닌 영상, 최대 15개 제한
   
   [새로운 함수들]
   추가됨:
   - addToBlacklist(video): 
     블랙리스트에 추가, videoBlacklist localStorage 저장
   - removeFromBlacklist(videoId): 
     블랙리스트에서 제거
   
   [수정된 handleVideoSelect 함수]
   삭제됨:
   - setSearchResults([]); 만 호출
   
   추가됨:
   - setFilteredResults([]); 도 함께 초기화
   - 검색 결과 자동 닫기 기능
   
   [UI 렌더링 변경]
   삭제됨:
   - "전체" 필터 버튼
   - 필터 버튼 항상 표시
   
   추가됨:
   - searchResults.length > 0 조건으로 필터 버튼 표시
   - 본 영상 버튼에 정렬 화살표 (↓/↑) 추가
   - 클릭 시 정렬 순서 토글
   - 안 볼 영상 개수 실시간 계산
   - 안 본 영상 최대 15개 표시
   - 각 영상 카드에 × 버튼 (블랙리스트 추가)
   - 블랙리스트 영상에 ↻ 버튼 (제거)
   
   [useEffect 수정]
   삭제됨:
   - filterMode, searchResults 의존성만
   
   추가됨:
   - watchedSortOrder 의존성 추가
   - 정렬 순서 변경 시에도 재필터링
   
   [필터링 메시지 수정]
   삭제됨:
   - watched/unwatched만 구분
   
   추가됨:
   - blacklisted 모드일 때 "안 볼 영상이 없습니다." 메시지

데이터 구조:
localStorage.watchHistory = {
  [videoId]: {
    videoId: string,
    firstWatchedAt: ISO 날짜,
    lastWatchedAt: ISO 날짜,
    watchCount: 시청 횟수,
    totalWatchTime: 초 단위,
    lastPosition: 마지막 위치,
    progress: 진행률 %,
    duration: 전체 길이
  }
}

localStorage.videoBlacklist = {
  [videoId]: {
    title: 영상 제목 (신규),
    channelTitle: 채널명 (신규),
    addedAt: ISO 날짜 (신규)
  }
}

삭제된 기능: 
- "전체" 필터 버튼

추가된 기능:
- 서버 검색 결과 5개 → 40개 증가
- 블랙리스트 (안 볼 영상) 관리
- 안 본 영상 15개 제한
- 본 영상 시청 횟수 정렬 (오름차순/내림차순)
- 영상 선택 시 검색 결과 자동 닫기
- 검색 결과가 있을 때만 필터 버튼 표시